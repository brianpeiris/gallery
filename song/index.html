<!DOCTYPE html>
<html dir=ltr lang=en ng-app=SongPane>

<head>
    <meta charset=UTF-8>
    <link href="stylesheet.css" rel="stylesheet" type="text/css">
    <link rel="shortcut icon" href=//songpane.com/favicon.ico>
    <title ng-bind="songs[r.songId].title||sets[r.setId].title||'SongPane'">Gallery</title>
    <meta name=description content="">
    <meta name=viewport content="initial-scale=1.0, user-scalable=no">

    <body sp-tap=resetState() ng-class="slow&&'slow'||''" class=icon-songpane>
        <div id=ui ng-include="ready&&'views/ui.html'" ng-class="{on:modalClass, run:ready}"></div>
        <div ng-view=""></div>
        <div ng-include="r.modal&&'modal'" onload="modalClass='on'"></div>
        <div id=notifier sp-notifier=""></div>

        <script id=modal type=text/ng-template>
            <figure id=modal ng-class=r.modal&&modalClass>
                <article ng-include=r.modal id="{{'modal-'+r.modal}}" class=modal>
                </article>
            </figure>
        </script>
        <script id=rename type=text/ng-template>
            <form novalidate name=renameSetForm method=post ng-controller=renameController>
                <header>
                    <button type=button class="btn x" sp-tap=modal() sp-kbd="'esc'"></button>
                    <input class="btn action" type=submit ng-disabled=renameSetForm.$invalid ng-click="renameSet(r.setId, newTitle)&&modal()" value={{_.save}}>
                    <h2>{{_.renameSet}}</h2></header>
                <ul class=list>
                    <li>
                        <input class="input block" ng-init="newTitle=sets[r.setId].title" required ng-model=newTitle sp-focus="">
                    </li>
                </ul>
            </form>
        </script>
        <script id=settings type=text/ng-template>
            <header>
                <button class="btn x" sp-tap=modal() sp-kbd="'esc'"></button>
                <h2>{{_.settings}}</h2></header>
            <ul class=list ng-controller=settingsController>
                <li sp-tap="toggle('hideChords')"><span>{{_.hideChords}}</span>
                    <div class="toggle fr" ng-class={on:s.hideChords}></div>
                </li>
                <li><span>{{_.fontSize}}</span>
                    <div class=group><span sp-tap=setFont(0) class="btn flex" ng-class={on:!s.fontSize}>{{_.small}}</span><span sp-tap=setFont(1) class="btn flex" ng-class="{on:s.fontSize==1}">{{_.medium}}</span><span sp-tap=setFont(2) class="btn flex" ng-class="{on:s.fontSize==2}">{{_.large}}</span></div>
                </li>
                <li><span>{{_.disconnectAccount}}</span>
                    <button class="btn danger block" sp-tap=logout()&&modal()>{{_.disconnect}}</button>
                </li>
                <li><q>v0.2.5</q></li>
            </ul>
        </script>
        <script id=share-readonly type=text/ng-template>
            <header>
                <button class="btn x" sp-tap=modal() sp-kbd="'esc'"></button>
                <button class="btn action" sp-tap=modal()>{{_.done}}</button>
                <h2>{{_.shareSet}}</h2></header>
            <ul class=list>
                <li class=collaborator ng-repeat="u in [owner].concat(c)">
                    <div class="img fl"><img width=30 height=30 ng-src="https://gravatar.com/avatar/{{md5(u)}}?s=60&d=blank"></div><span class=fr>{{owner==u&&'owner'||e.indexOf(u)>-1&&'editor'||'viewer'}}</span>
                    <div class=trim>{{u}}</div>
                </li>
            </ul>
        </script>
        <script id=share-readwrite type=text/ng-template>
            <header>
                <button class="btn x" sp-tap=modal() sp-kbd="'esc'"></button>
                <button class="btn action" sp-tap=save()&&modal()>{{_.done}}</button>
                <h2>{{_.shareSet}}</h2></header>
            <ul class=list>
                <li class=collaborator>
                    <div class="img fl"><img width=30 height=30 ng-src="https://gravatar.com/avatar/{{md5(owner)}}?s=60&d=blank"></div><span class=fr>{{_.owner}}</span>
                    <div class=trim>{{owner}}</div>
                </li>
                <li class=collaborator ng-repeat="user in c">
                    <div class="img fl"><img width=30 height=30 ng-src="https://gravatar.com/avatar/{{md5(user)}}?s=60&d=blank"></div>
                    <button sp-tap=denyAccess(user) class="btn danger icon-minus fr"></button> <span class="select-wrap fr"><select ng-change="allowAccess(user, cap)" ng-init="cap=e.indexOf(user)>-1&&'edit'||'view'" ng-model=cap ng-options="c for c in ['view', 'edit']"></select><span class="select btn">{{cap}}</span></span>
                    <div class=trim>{{user}}</div>
                </li>
                <li class=collaborator>
                    <form novalidate>
                        <div class="img fl"><img width=30 height=30 ng-src="https://gravatar.com/avatar/{{md5(m)}}?s=60&d=blank"></div>
                        <button type=submit ng-disabled=!m ng-click="allowAccess(m, t)&&(m='')" class="btn action icon-plus fr"></button> <span class="select-wrap fr"><select ng-init="t='view'" ng-model=t ng-options="c for c in ['view', 'edit']"></select><span class="select btn">{{t}}</span></span>
                        <div class=trim>
                            <input class=input required ng-model=m placeholder={{_.email}}>
                        </div>
                    </form>
                </li>
            </ul>
        </script>
        <script id=share type=text/ng-template>
            <div ng-include="isOwner()&&'share-readwrite'||'share-readonly'" ng-controller=shareController></div>
        </script>
        

        <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.0.6/angular.min.js"></script>
        <script type="text/javascript" src="js/app.js"></script>
        <script type="text/javascript" src="js/controller.js"></script>
        <script type="text/javascript" src="js/directives.js"></script>
        <script type="text/javascript" src="js/factories.js"></script>
        <script type="text/javascript" src="js/services.js"></script>
